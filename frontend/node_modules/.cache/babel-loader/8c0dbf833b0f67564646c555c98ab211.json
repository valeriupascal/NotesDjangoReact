{"ast":null,"code":"import _objectSpread from\"/mnt/c/Users/VAL/Desktop/DJANGO/mynotes/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/mnt/c/Users/VAL/Desktop/DJANGO/mynotes/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/mnt/c/Users/VAL/Desktop/DJANGO/mynotes/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/mnt/c/Users/VAL/Desktop/DJANGO/mynotes/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import{ReactComponent as ArrowLeft}from'../assets/arrow-left.svg';import{ReactComponent as DeleteIcon}from'../assets/delete.svg';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NotePage=function NotePage(){var noteId=useParams().id;var navigate=useNavigate();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),note=_useState2[0],setNote=_useState2[1];useEffect(function(){getNote();},[noteId]);var getNote=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(noteId==='new')){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.next=4;return fetch(\"/api/notes/\".concat(noteId,\"/\"));case 4:response=_context.sent;_context.next=7;return response.json();case 7:data=_context.sent;setNote(data);case 9:case\"end\":return _context.stop();}}},_callee);}));return function getNote(){return _ref.apply(this,arguments);};}();var createNote=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:fetch(\"/api/notes/create/\",{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify(note)});case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function createNote(){return _ref2.apply(this,arguments);};}();var updateNote=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:fetch(\"/api/notes/\".concat(noteId,\"/update/\"),{method:\"PUT\",headers:{'Content-Type':'application/json'},body:JSON.stringify(note)});case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function updateNote(){return _ref3.apply(this,arguments);};}();var deleteNote=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:fetch(\"/api/notes/\".concat(noteId,\"/delete/\"),{method:\"DELETE\",headers:{'Content-Type':'application/json'}});navigate('/');case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function deleteNote(){return _ref4.apply(this,arguments);};}();var handleSubmit=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(){return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!(noteId!=='new'&&!note.body)){_context5.next=7;break;}_context5.next=3;return deleteNote();case 3:_context5.next=5;return new Promise(function(resolve,reject){return setTimeout(resolve,150);});case 5:_context5.next=19;break;case 7:if(!(noteId!=='new')){_context5.next=14;break;}_context5.next=10;return updateNote();case 10:_context5.next=12;return new Promise(function(resolve,reject){return setTimeout(resolve,100);});case 12:_context5.next=19;break;case 14:if(!(noteId==='new'&&note.body!==null)){_context5.next=19;break;}_context5.next=17;return createNote();case 17:_context5.next=19;return new Promise(function(resolve,reject){return setTimeout(resolve,100);});case 19:navigate('/');case 20:case\"end\":return _context5.stop();}}},_callee5);}));return function handleSubmit(){return _ref5.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"note\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"note-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(ArrowLeft,{onClick:handleSubmit})}),noteId!=='new'?/*#__PURE__*/_jsx(\"button\",{onClick:deleteNote,children:/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(DeleteIcon,{})})}):/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"Done\"})]}),/*#__PURE__*/_jsx(\"textarea\",{onChange:function onChange(e){setNote(_objectSpread(_objectSpread({},note),{},{'body':e.target.value}));},value:note===null||note===void 0?void 0:note.body})]});};export default NotePage;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","ReactComponent","ArrowLeft","DeleteIcon","NotePage","noteId","id","navigate","note","setNote","getNote","fetch","response","json","data","createNote","method","headers","body","JSON","stringify","updateNote","deleteNote","handleSubmit","Promise","resolve","reject","setTimeout","e","target","value"],"sources":["/mnt/c/Users/VAL/Desktop/DJANGO/mynotes/frontend/src/pages/NotePage.js"],"sourcesContent":["import React, {useState, useEffect} from 'react'\r\nimport { useParams, useNavigate } from 'react-router-dom'\r\nimport { ReactComponent as ArrowLeft } from '../assets/arrow-left.svg';\r\nimport { ReactComponent as DeleteIcon } from '../assets/delete.svg';\r\n\r\nconst NotePage = () => {\r\n    \r\n  let noteId = useParams().id\r\n  let navigate = useNavigate();\r\n\r\n  let [note, setNote] = useState(null)\r\n  \r\n  useEffect(() => {\r\n    getNote()\r\n  }, [noteId])\r\n\r\n\r\n  let getNote = async () => {\r\n      if(noteId === 'new') return;\r\n\r\n      let response = await fetch(`/api/notes/${noteId}/`)\r\n      let data = await response.json()\r\n      setNote(data)\r\n  }\r\n\r\n\r\n  let createNote = async () => {\r\n      fetch(`/api/notes/create/`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(note)\r\n      })\r\n  }\r\n\r\n\r\n\r\n  let updateNote = async () => {\r\n      fetch(`/api/notes/${noteId}/update/`, {\r\n        method: \"PUT\",\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(note)\r\n      })\r\n  }\r\n\r\n\r\n  let deleteNote = async () => {\r\n      fetch(`/api/notes/${noteId}/delete/`, {\r\n        method: \"DELETE\",\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        }\r\n      })\r\n      navigate('/')\r\n  }\r\n\r\n\r\n  let handleSubmit = async () => {\r\n    if(noteId !== 'new' && !note.body){\r\n      await deleteNote()\r\n      await new Promise((resolve, reject) => setTimeout(resolve, 150));\r\n    } else if(noteId !== 'new'){\r\n      await updateNote()\r\n      await new Promise((resolve, reject) => setTimeout(resolve, 100));\r\n    } else if(noteId === 'new' && note.body !== null) {\r\n      await createNote()\r\n      await new Promise((resolve, reject) => setTimeout(resolve, 100));\r\n    }\r\n    navigate('/')\r\n  }\r\n\r\n  return (\r\n    <div className='note'>\r\n      <div className='note-header'>\r\n        <h3>\r\n            <ArrowLeft onClick={handleSubmit} />  \r\n        </h3>\r\n        {/* show delete button only if is not new. If its new show Done */}\r\n        {noteId !== 'new' ? (\r\n            <button onClick={deleteNote}><h3><DeleteIcon /></h3></button>\r\n        ) : <button onClick={handleSubmit}>Done</button> }\r\n        \r\n      </div>\r\n      <textarea onChange={(e) => {\r\n        setNote({...note, 'body': e.target.value})}} value={note?.body}></textarea>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default NotePage"],"mappings":"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"},"metadata":{},"sourceType":"module"}